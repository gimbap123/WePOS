<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="com.wepos.pos.dao.PosMainDao">
  
  <select id="getTableCount" parameterType="int" resultType="int">
    select count(table_code)
    from shop s, tables t
    where s.shop_code = t.shop_code
    and s.shop_code = #{shopCode}
  </select>
  
  <!-- 매니저 아이디로 매장 코드 구함 -->
  <select id="getShopCode" parameterType="String" resultType="int">
    select shop_code
    from shop
    where shop_code = ( select shop_code from mgr where mgr_id = #{mgr_id} )
  </select>
  
  <!-- 매장 코드로 매장 정보 구함 -->
  <select id="getShop" parameterType="int" resultType="shopDto" >
    select *
    from shop
    where shop_code = #{shop_code}
  </select>
  
  <!-- 매장 코드로 매장 테이블 정보 select -->
  <select id="getTables" parameterType="int" resultType="TablesDto">
    select * 
    from tables 
    where shop_code= #{shop_code}
  </select>
</mapper>
